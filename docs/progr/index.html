
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>HPC programming - EuroCC Knowledge Pool</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
<!-- Glow Cookies v3.0.1 -->
<script src="https://cdn.jsdelivr.net/gh/manucaralmo/GlowCookies@3.1.4/src/glowCookies.min.js"></script>
<script>
    glowCookies.start('en', { 
        style: 2,
        analytics: 'G-0SFSYQYBDW',
        bannerDescription: 'We use Google Analytics (GA) cookies to analyze web traffic.',
        bannerLinkText: 'More info about GA and possibility to completely Opt-Out',
        policyLink: 'https://tools.google.com/dlpage/gaoptout'
    });
</script>

    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#parallel-programming" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="EuroCC Knowledge Pool" class="md-header__button md-logo" aria-label="EuroCC Knowledge Pool" data-md-component="logo">
      
  <img src="../img/boxLogo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EuroCC Knowledge Pool
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              HPC programming
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="EuroCC Knowledge Pool" class="md-nav__button md-logo" aria-label="EuroCC Knowledge Pool" data-md-component="logo">
      
  <img src="../img/boxLogo.png" alt="logo">

    </a>
    EuroCC Knowledge Pool
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../getstarted/" class="md-nav__link">
        HPC 101
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../best/" class="md-nav__link">
        Best practices
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          HPC programming
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        HPC programming
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#parallel-programming" class="md-nav__link">
    Parallel programming
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openmp-multithreading" class="md-nav__link">
    OpenMP (multithreading)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mpi-message-passing-interface" class="md-nav__link">
    MPI (message passing interface)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gpu-programming" class="md-nav__link">
    GPU programming
  </a>
  
    <nav class="md-nav" aria-label="GPU programming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nvidia-cuda" class="md-nav__link">
    Nvidia CUDA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#amd-hip" class="md-nav__link">
    AMD HIP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../choice/" class="md-nav__link">
        Choose your HPC
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../hpc_types/" class="md-nav__link">
        HPC types
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../use_cases/" class="md-nav__link">
        HPC use cases
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#parallel-programming" class="md-nav__link">
    Parallel programming
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openmp-multithreading" class="md-nav__link">
    OpenMP (multithreading)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mpi-message-passing-interface" class="md-nav__link">
    MPI (message passing interface)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gpu-programming" class="md-nav__link">
    GPU programming
  </a>
  
    <nav class="md-nav" aria-label="GPU programming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nvidia-cuda" class="md-nav__link">
    Nvidia CUDA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#amd-hip" class="md-nav__link">
    AMD HIP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset"><a class="md-content__button md-icon" download href="../pdf/combined.pdf" title="PDF Export"><svg style="height: 1.2rem; width: 1.2rem;" viewBox="0 0 384 512" xmlns="http://www.w3.org/2000/svg"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm76.45 211.36l-96.42 95.7c-6.65 6.61-17.39 6.61-24.04 0l-96.42-95.7C73.42 337.29 80.54 320 94.82 320H160v-80c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v80h65.18c14.28 0 21.4 17.29 11.27 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"></path></svg></a>
                
                  


  <h1>HPC programming</h1>

<p>As with any other computer, an HPC system can be used with sequential programming. This is the practice of writing computer programs executing one instruction after the other, but not instructions simultaneously in parallel, i.e., parallel programming.</p>
<h2 id="parallel-programming">Parallel programming</h2>
<p>There are different ways of writing parallelized code, while in general there is only one way to write sequential code, generally as a logic sequence of steps.</p>
<h2 id="openmp-multithreading">OpenMP (multithreading)</h2>
<p>A popular way of parallel programming is through writing sequential code and pointing at specific pieces of code that can be parallelized into threads (fork-join mechanism, see figure below inspired from <a href="https://www.admin-magazine.com/var/ezflow_site/storage/images/media/images/pymp_01/172579-1-eng-US/Pymp_01_reference.png">ADMIN magazine</a>). A thread is an independent execution of code with its own allocated memory.</p>
<p><img alt="multi" src="https://github.com/DeiC-HPC/EuroCC-knowledgepool/raw/b4a392a96074a4fe6bcce996a461a1b85d8b45b7/develop/img/multithreading.png" /></p>
<p>If threads vary in execution time, when they have to be joined together to collect data, some threads might have to wait for others, leading to loss of execution time. It is up to the programmer to best balance the distribution of threads to optimize execution times when possible.</p>
<p>Modern CPUs support openMP in a natural way, since they are usually multicore CPUs and each core can execute threads independently. OpenMP is available as an extension to the programming languages C and Fortran and is mostly used to parallelize for loops that constitute a time bottleneck for the software execution.</p>
<table>
<thead>
<tr>
<th align="left">Link</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a href="https://www.youtube.com/watch?v=2GwZKJ4QpME">Video course</a></td>
<td align="left">a video course (here the link to the first lesson, you will be able to find all the other lessons associated to that) held by  ARCHER UK.</td>
</tr>
<tr>
<td align="left"><a href="https://chryswoods.com/beginning_openmp/">OpenMP Starter</a></td>
<td align="left">A starting guide for OpenMP</td>
</tr>
<tr>
<td align="left"><a href="https://en.wikitolearn.org/Course:Parallel_programming_with_OpenMP_and_MPI">WikiToLearn course</a></td>
<td align="left">An OpenMP course from WikiToLearn</td>
</tr>
<tr>
<td align="left"><a href="https://ocw.mit.edu/courses/earth-atmospheric-and-planetary-sciences/12-950-parallel-programming-for-multicore-machines-using-openmp-and-mpi-january-iap-2010/">MIT course</a></td>
<td align="left">A course from MIT including also MPI usage (next section for more info about MP)</td>
</tr>
</tbody>
</table>
<h2 id="mpi-message-passing-interface">MPI (message passing interface)</h2>
<p>MPI is used to distribute data to different processes, that otherwise could not access to such data (figure below inspired by <a href="https://hpc-tutorials.llnl.gov/mpi/what_is_mpi/">LLNL</a>). </p>
<p><img alt="distributed memory" src="https://github.com/DeiC-HPC/EuroCC-knowledgepool/raw/b4a392a96074a4fe6bcce996a461a1b85d8b45b7/develop/img/distributed_memory.png" /></p>
<p>MPI is considered a very hard language to learn, but this reputation is mostly due to the fact that the message passing is programmed explicitly.</p>
<table>
<thead>
<tr>
<th align="left">Link</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a href="https://www.youtube.com/watch?v=R5rIoAkEJBE">Video course</a></td>
<td align="left">a video course (here the link to the first lesson, you will be able to find all the other lessons associated to that) held by  ARCHER UK.</td>
</tr>
<tr>
<td align="left"><a href="https://chryswoods.com/beginning_mpi/">MPI Starter</a></td>
<td align="left">A starting guide for OpenMP</td>
</tr>
<tr>
<td align="left"><a href="https://www.futurelearn.com/info/courses/python-in-hpc/0/steps/65139">PRACE course</a></td>
<td align="left">A PRACE course on the MOOC platform FutureLearn</td>
</tr>
</tbody>
</table>
<h2 id="gpu-programming">GPU programming</h2>
<p>GPUs (graphical processing units) are computing accelerators that are used to boosts heavy linear algebra applications, such as deep learning. A GPU usually features a large number of special processing units that enable massively parallel execute of code (figure below inspired by <a href="https://astrocompute.files.wordpress.com/2011/03/gpu-computing-feature.jpg">Astronomy Computing Today</a>).</p>
<p><img alt="gpu" src="https://github.com/DeiC-HPC/EuroCC-knowledgepool/raw/b4a392a96074a4fe6bcce996a461a1b85d8b45b7/develop/img/gpu.png" /></p>
<p>When utilized properly GPUs can enable performance of certain programs that is unachievable using only CPUs. To achieve this performance GPUs employ an architecture that is vastly different from that of a CPU which is illustrated below (figure inspired by <a href="https://www.omnisci.com/technical-glossary/cpu-vs-gpu">omisci</a>), where ALU is an acronym for arithmetic logic unit.</p>
<p><img alt="architechture" src="https://github.com/DeiC-HPC/EuroCC-knowledgepool/raw/b4a392a96074a4fe6bcce996a461a1b85d8b45b7/develop/img/architecture.png" /></p>
<p>For the sake of clarity text is omitted in parts of the figure with the different parts indicated by their colour code.</p>
<p>When writing programs that utilize GPUs the different architecture of a GPU poses a different set of challenges compared to those of writing parallel programs for CPUs. Specifically as memory on GPUs is limited compared to CPUs a different approach to memory management is required.</p>
<p>AMD and Nvidia are the two main producers of GPUs, where the latter has dominated the market for a long time. The Danish HPCs Type 1 and 2 feature various models of Nvidia graphic cards, while Type 5 (LUMI) has the latest AMD Instinct.</p>
<p>The distinction between AMD and Nvidia is mainly due to the fact that they are programmed with two different dialects, and software with dedicated multithreading on GPUs need to be coded specifically for the two brands of GPUs.</p>
<h3 id="nvidia-cuda">Nvidia CUDA</h3>
<p><code>CUDA</code> is a <code>C++</code> dialect that has also various library for the most popular languages and packages (e.g. <code>Python</code>, <code>PyTorch</code>, <code>MATLAB</code>, ...).</p>
<table>
<thead>
<tr>
<th align="left">Link</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a href="https://developer.nvidia.com/cuda-education-training">Nvidia developer training</a></td>
<td align="left">Nvidia developer trainings for <code>CUDA</code> programming</td>
</tr>
<tr>
<td align="left"><a href="https://developer.nvidia.com/cuda-books-archive">Book archive</a></td>
<td align="left">An archive of books for <code>CUDA</code> programming</td>
</tr>
<tr>
<td align="left"><a href="https://bookauthority.org/books/new-cuda-books">Advanced books</a></td>
<td align="left">Some advanced books for coding with <code>CUDA</code></td>
</tr>
<tr>
<td align="left"><a href="https://developer.nvidia.com/how-to-cuda-python">PyCUDA</a></td>
<td align="left">Code in <code>CUDA</code> with python</td>
</tr>
</tbody>
</table>
<h3 id="amd-hip">AMD HIP</h3>
<p>HIP is a dialect for AMD GPUs of recent introduction. It has the advantage of being able to be compiled for both AMD and Nvidia hardware. <code>CUDA</code> code can be converted to HIP code almost automatically with some extra adjustments by the programmer.</p>
<p>The LUMI HPC consortia has already organized a course for HIP coding and CUDA-to-HIP conversion. Check out their page for new courses.</p>
<table>
<thead>
<tr>
<th align="left">Link</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a href="https://www.youtube.com/watch?v=3ZXbRJVvgJs">Video introduction 1</a></td>
<td align="left">Video introduction to HIP</td>
</tr>
<tr>
<td align="left"><a href="https://www.youtube.com/watch?v=57FwfePRd-Y">Video introduction 2</a></td>
<td align="left">Video introduction to HIP</td>
</tr>
<tr>
<td align="left"><a href="https://rocmdocs.amd.com/en/latest/Programming_Guides/Programming-Guides.html">AMD programming guide</a></td>
<td align="left">Programming guide to HIP from the producer AMD</td>
</tr>
</tbody>
</table>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
<p style="text-align:center;">
  
    This documentation is part of the EuroHPC Competence Center in Denmark, managed by DeiC.dk.

</p>

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>